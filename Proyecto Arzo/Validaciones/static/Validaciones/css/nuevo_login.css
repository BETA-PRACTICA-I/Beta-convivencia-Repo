/* --- 1. CONFIGURACIÓN GLOBAL Y FUENTES --- */

/* Importamos una fuente bonita de Google Fonts (Montserrat) */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');

/* Definimos nuestras variables de color. 
Si quieres cambiar un color, solo lo cambias aquí.
*/
:root {
    --color-principal: #1A3A6A; /* Azul oscuro principal (basado en tu PANTALLA COMPLETA_-03.png) */
    --color-secundario: #2a5a9e; /* Un azul más claro para acentos */
    --color-texto-claro: #FFFFFF;
    --color-texto-oscuro: #333;
    --color-fondo-input: #FFFFFF;
    --color-placeholder: #888;
    --color-error: #e74c3c; /* Rojo para mensajes de error */
}

/* Reseteo básico para que se vea bien en todos los navegadores */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    font-family: 'Montserrat', sans-serif;
    color: var(--color-texto-claro);
    overflow: hidden; /* Evita el scroll no deseado */
}

/* --- 2. ANIMACIÓN DEL CIELO --- */

/* Esta es la animación para tu idea del cielo.
Mueve la imagen de fondo (Cielo.jpg) de izquierda a derecha
lentamente (80 segundos) y en un bucle infinito.
*/
@keyframes mover-cielo {
    0% {
        background-position-x: 0%;
    }
    100% {
        background-position-x: 100%;
    }
}


/* --- 3. LAYOUT PRINCIPAL (El Contenedor) --- */

.login-container {
    display: grid;
    /* Estado inicial: 40% para el panel azul, 60% para la catedral.
    Esto es lo que se animará.
    */
    grid-template-columns: 40% 60%;
    height: 100vh;
    /* La transición suave cuando cambiemos el grid-template-columns */
    transition: grid-template-columns 0.9s cubic-bezier(0.86, 0, 0.07, 1);
}

.panel {
    position: relative;
    height: 100%;
    overflow: hidden;
    /* Centramos el contenido de los paneles */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
}

/* --- 4. PANEL IZQUIERDO (FORMULARIO) --- */

.panel-izquierdo {
    z-index: 10; /* Se pondrá por encima del panel derecho al moverse */
    background-color: var(--color-principal); /* Color de fondo si la imagen no carga */
}

/* El fondo azul con patrones que diseñaste */
.fondo-panel-izquierdo {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    
    background-position: right center;

    z-index: -1;
    opacity: 0.4; /* Lo hacemos sutil */
}

.panel-izquierdo .panel-contenido {
    width: 100%;
    max-width: 420px; /* Ancho máximo para el formulario */
    z-index: 2;
    color: var(--color-texto-claro);
    /* --- CAMBIO --- */
    /* Hacemos que este contenedor sea 'relative'
       para posicionar el botón "Volver" dentro de él. */
    position: relative;
    padding-top: 2rem; /* Añadimos espacio por si el botón "Volver" está arriba */
}

.logo-login {
    width: 220px; 
    height: auto;
    margin-bottom: 2rem;
    
    /* Le decimos EXÁCTAMENTE qué propiedades debe animar */
    transition: opacity 0.4s ease, 
                transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                margin-bottom 0.5s ease;
    
    /* Estado inicial: visible y tamaño normal */
    opacity: 1;
    transform: scale(1);
}

.panel-izquierdo h2 {
    font-weight: 700;
    font-size: 2.2rem;
    margin-bottom: 0.5rem;
}

.panel-izquierdo p {
    font-size: 1.1rem;
    margin-bottom: 2rem;
}
/* --- 5. PANEL DERECHO (SELECCIÓN DE ROL) --- */

.panel-derecho {
    z-index: 5; /* Detrás del panel izquierdo */
}

.cielo-fondo, .catedral-fondo {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-repeat: no-repeat;
}

/* El cielo está de fondo */
.cielo-fondo {
    background-position: center;
    z-index: 1;
    /* Aplicamos la animación que creamos */
    animation: mover-cielo 80s linear infinite alternate;
}

/* La catedral está por encima del cielo */
.catedral-fondo {
    background-position: bottom center;
    z-index: 2;
    opacity: 0.8; /* Leve transparencia para que se mezcle con el cielo */
}

.panel-derecho .panel-contenido {
    position: relative;
    z-index: 3; /* Encima de la catedral y el cielo */
    padding: 2.2rem;
    background-color: rgba(30, 81, 160, 0.3); /* Fondo oscuro semitransparente para legibilidad */
    border-radius: 15px;
    box-shadow: 0 6px 20px rgba(10,10,10,0.06);
    backdrop-filter: blur(2px); /* Efecto "vidrio" */
    /* --- CAMBIO --- */
    /* Achicamos la "box" estableciendo un ancho máximo */
    width: 90%; /* Ocupará el 90% de su panel, pero... */
    max-width: 480px; /* ...nunca será más ancho que 480px */

    opacity: 1;
    transform: translateY(0);
    transition: opacity 1.0s ease-out 0.4s, /* Duración 1.0s, Retraso 0.4s */
                transform 0.8s ease-out 0.4s;
}

.panel-derecho h1 {
    /* --- CAMBIO --- */
    /* Reducimos un poco el título */
    font-weight: 700;
    font-size: 2.3rem;
    margin-bottom: 0.5rem;
}

.panel-derecho p {
    font-size: 1.2rem;
    margin-bottom: 2rem;
}

.botones-rol-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}


/* --- 6. ESTILOS DE BOTONES (¡Para que no se vean feos!) --- */

.btn {
    cursor: pointer;
    border: none;
    border-radius: 50px; /* Totalmente redondeados */
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
}

/* Botones de Rol (Blancos, "fantasma") */
.btn-rol {
    background-color: rgba(255, 255, 255, 0.9);
    color: var(--color-principal);
    border: 2px solid var(--color-texto-claro);
}

.btn-rol:hover {
    background-color: var(--color-texto-claro);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

/* Botón de Iniciar Sesión (Azul) */
.btn-login {
    background-color: var(--color-secundario);
    color: var(--color-texto-claro);
    width: 100%;
    margin-top: 1rem;
}

.btn-login:hover {
    background-color: #3a7bd5; /* Azul más brillante al pasar el mouse */
    transform: scale(1.02);
}

/* --- CAMBIO --- */
/* Nuevo diseño minimalista para el botón "Volver" */
.btn-volver {
    position: absolute; /* Lo posiciona relativo al .panel-contenido */
    top: -1rem; /* Lo sube a la esquina superior */
    left: 0; /* Esquina izquierda */
    
    background: transparent;
    color: rgba(255, 255, 255, 0.7); /* Color sutil */
    font-size: 0.9rem;
    text-transform: none;
    letter-spacing: 0;
    padding: 0.5rem;
    border-radius: 8px;
}

.btn-volver:hover {
    background-color: rgba(255, 255, 255, 0.1); /* Leve fondo al pasar el mouse */
    color: var(--color-texto-claro); /* Color se vuelve sólido */
    text-decoration: none; /* Quitamos cualquier subrayado */
}

/* --- 7. ESTILOS DEL FORMULARIO DE DJANGO --- */

.login-form {
    width: 100%;
}

.input-grupo {
    position: relative;
    width: 100%;
    margin-bottom: 1.2rem;
}

.input-grupo i {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-placeholder);
}

/* ESTA ES LA PARTE IMPORTANTE:
Le damos estilo a los campos <input> que Django crea.
Los seleccionamos por su 'name' o simplemente como 'input'
dentro de .input-grupo.
*/
.input-grupo input[type="text"],
.input-grupo input[type="password"] {
    width: 100%;
    padding: 1rem 1rem 1rem 3.5rem; /* Espacio a la izquierda para el ícono */
    border: none;
    border-radius: 50px;
    background-color: var(--color-fondo-input);
    color: var(--color-texto-oscuro);
    font-size: 1rem;
    font-family: 'Montserrat', sans-serif;
}

.input-grupo input::placeholder {
    color: var(--color-placeholder);
}

/* Estilo para los mensajes de error de Django */
.mensajes-error {
    background-color: rgba(255, 0, 0, 0.1);
    border: 1px solid var(--color-error);
    color: var(--color-error);
    padding: 0.8rem;
    border-radius: 5px;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    text-align: left;
}
.mensajes-error p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--color-error);
}


/* --- 8. LA ANIMACIÓN DE TRANSICIÓN --- */

/* ESTADO INICIAL (Selección de Rol) */
.panel-izquierdo .login-form,
.panel-izquierdo .btn-volver,
.panel-izquierdo h2,
.panel-izquierdo p {
    display: none; 
}

/* ESTADO DE LOGIN (Cuando JS agregue la clase .modo-login) */

.login-container.modo-login {
    grid-template-columns: 100% 0%;
}

/* Animación del logo (colapsar espacio) */
.login-container.modo-login .logo-login {
    max-height: 0;
    margin-bottom: 0;
    opacity: 0;
    transform: scale(0.9);
    pointer-events: none; 
}

/* Mostramos el formulario y el resto del contenido */
.login-container.modo-login .login-form,
.login-container.modo-login .btn-volver,
.login-container.modo-login h2,
.login-container.modo-login p {
    display: block; 
}

/* Oculta la caja de selección de rol (panel derecho) al entrar en modo login */
.login-container.modo-login .panel-derecho .panel-contenido {
    opacity: 0;
    transform: translateY(20px); /* Se desvanece y baja un poco */
    pointer-events: none; /* Evita clics fantasma */

    /* --- ¡CAMBIO 2 AQUÍ! --- */
    /* Esta es la transición para "DESAPARECER" (rápida y sin delay) */
    transition: opacity 0.5s ease-out 0s, /* Duración 0.5s, Retraso 0s */
                transform 0.5s ease-out 0s;
}


/* --- 9. RESPONSIVE (Para Celulares) --- */

/* Si la pantalla es menor a 768px (tablets y celulares) */
@media (max-width: 768px) {
    
    .login-container {
        /* Los paneles se apilan uno encima de otro */
        grid-template-columns: 100% 0%;
        /* Por defecto, queremos mostrar la selección de rol.
        El panel derecho (catedral) debe estar ENCIMA.
        */
        grid-template-areas: "stack";
    }

    .panel {
        grid-area: "stack"; /* Ambos paneles ocupan la misma celda */
        width: 100%;
        transition: transform 0.8s ease-in-out;
    }

    .panel-izquierdo {
        /* El panel azul (formulario) empieza oculto a la izquierda */
        transform: translateX(-100%);
        z-index: 10;
    }

    .panel-derecho {
        /* El panel de catedral está visible */
        transform: translateX(0);
        z-index: 5;
    }

    /* ESTADO DE LOGIN en MÓVIL
    El panel azul se desliza desde la izquierda y tapa al otro.
    */
    .login-container.modo-login .panel-izquierdo {
        transform: translateX(0);
    }
    
    .panel-derecho .panel-contenido {
        width: 90%;
        padding: 1.5rem; /* Un poco menos de padding en móvil */
    }

    .panel-derecho h1 {
        font-size: 2rem;
    }

    /* --- CAMBIO --- */
    /* Ajustamos el botón "Volver" en móvil */
    .btn-volver {
        top: 1rem;
        left: 0.5rem;
    }

    .panel-izquierdo .panel-contenido {
        padding-top: 3rem; /* Más espacio arriba en móvil para el botón "Volver" */
    }
}